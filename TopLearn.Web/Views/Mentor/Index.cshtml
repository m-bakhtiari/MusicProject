@model List<TopLearn.DataLayer.Entities.Course.Student>
<section class="base-template" data-scroll-section>
    <div class="wrapper base-template__wrapper">

        <div class="base-template__content">
            <div class="horizontal-ticker">

                <!-- Horizontal Ticker: Slider RTL -->

                <div id="horizontal-ticker-rtl" class="swiper horizontal-ticker__slider">
                    <div class="swiper-wrapper">

                        @foreach (var item in Model)
                        {
                            <div class="swiper-slide horizontal-ticker__slide" 
                                 onclick="mentorInfo('@item.StudentId','@item.StudentFullName.Replace(' ','-')')">
                                <img src="/student/@item.ImageName"
                                     alt="@item.StudentFullName">
                                <div class="horizontal-ticker__caption">@item.StudentFullName</div>
                            </div>
                        }

                        <!-- slides copies -->
                        @foreach (var item in Model)
                        {
                            <div class="swiper-slide horizontal-ticker__slide" 
                                 onclick="mentorInfo('@item.StudentId','@item.StudentFullName.Replace(' ','-')')">
                                <img src="/student/@item.ImageName"
                                     alt="@item.StudentFullName">
                                <div class="horizontal-ticker__caption">@item.StudentFullName</div>
                            </div>
                        }

                    </div>
                </div>

                <!-- Horizontal Ticker: Slider LTR -->

                <div id="horizontal-ticker-ltr" class="swiper horizontal-ticker__slider">
                    <div class="swiper-wrapper">

                        @foreach (var item in Model)
                        {
                            <div class="swiper-slide horizontal-ticker__slide" 
                                 onclick="mentorInfo('@item.StudentId','@item.StudentFullName.Replace(' ','-')')">
                                <img src="/student/@item.ImageName"
                                     alt="@item.StudentFullName">
                                <div class="horizontal-ticker__caption">@item.StudentFullName</div>
                            </div>
                        }

                        <!-- slides copies -->

                        @foreach (var item in Model)
                        {
                            <div class="swiper-slide horizontal-ticker__slide" 
                                 onclick="mentorInfo('@item.StudentId','@item.StudentFullName.Replace(' ','-')')">
                                <img src="/student/@item.ImageName"
                                     alt="@item.StudentFullName">
                                <div class="horizontal-ticker__caption">@item.StudentFullName</div>
                            </div>
                        }

                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

@section Styles
{
    <style>
        .base-template {
            margin-top: 60px;
        }
        .base-template__wrapper {
            max-width: 300dvw;
            padding-bottom: 50px;
        }

        /**
        * Slider Instance
        */

        .swiper {
            width: 100%;
        }

        .swiper-wrapper {
            transition-timing-function: linear !important;
        }

        .swiper-slide {
            height: auto !important;
        }

        .horizontal-ticker {
            margin: 0 -20px;
            display: flex;
            flex-direction: column;
            row-gap: 2.85vw;
        }

        @@media screen and (max-width: 767.9px) {
            .horizontal-ticker {
                row-gap: 15px;
            }
        }

        /**
        * Slider Slides
        */

        .horizontal-ticker__slide {
            position: relative;
            width: 25.625vw;
            aspect-ratio: 270 / 185;
            border-radius: 10px;
            overflow: hidden;
            backdrop-filter: blur(50px);
            background-color: black;
        }

        @@media screen and (max-width: 767.9px) {
            .horizontal-ticker__slide {
                width: 100%;
            }
        }

        .horizontal-ticker__slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: opacity 0.6s ease-out;
        }

        .horizontal-ticker__slide img:last-child {
            position: absolute;
            inset: 0;
            opacity: 0;
        }

        @@media (hover: hover) and (pointer: fine) {
            .horizontal-ticker__slide:hover img:last-child {
                opacity: 1;
            }
        }

        .horizontal-ticker__caption {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 20px;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 0;
            box-sizing: border-box;
            font-weight: bold;
        }
    </style>

}


@section Scripts
{
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            var isDesktop = () => window.innerWidth > 767.9;

            var gap = isDesktop() ? 0.0285 * window.innerWidth : 15;

            var sliders = [];

            ["#horizontal-ticker-rtl", "#horizontal-ticker-ltr"].forEach((query, index) => {
                var slider = new Swiper(query, {
                    loop: true,
                    slidesPerView: "auto",
                    spaceBetween: gap,
                    speed: 8000,
                    allowTouchMove: true,
                    autoplay: {
                        delay: 0,
                        reverseDirection: index,
                        disableOnInteraction: false
                    }
                });

                // Restart autoplay after interaction
                slider.el.addEventListener('touchend', () => {
                    slider.autoplay.start();
                });
                slider.el.addEventListener('mouseup', () => {
                    slider.autoplay.start();
                });

                sliders.push(slider);
            });

            window.addEventListener("resize", () => {
                gap = isDesktop() ? 0.0285 * window.innerWidth : 15;
                sliders.forEach((slider) => {
                    slider.params.spaceBetween = gap;
                    slider.update();
                });
            });
        });

        function mentorInfo(id,name) {
            window.location.href = "/MentorInfo?id=" + id+"&name="+name;
        }
    </script>

}
